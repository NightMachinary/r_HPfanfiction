:PROPERTIES:
:Author: FerusGrim
:Score: 2
:DateUnix: 1562761032.0
:DateShort: 2019-Jul-10
:END:

I doubt this is the fic you're looking for (and this story gets recommended much too often), but linkffn(Harry Potter and the Methods of Rationality) has this exact plot point.